<!--pages/test/test.wxml-->
<scroll-view scroll-y="true" enable-back-to-top="true" style="height: 1000rpx" >
    <view>
  <button>aa1</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa10</button>
  <text>aaaa</text>
  <button>aa11</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa1</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa10</button>
  <text>aaaa</text>
  <button>aa11</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa1</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa</button>
  <button>aa10</button>
  <text>aaaa</text>
  <button>aa11</button>
  <button>aa</button>
  <button>aa</button>
</view>
</scroll-view>

<!-- 最底部的购物车 -->
<view class='cart'>
  <!-- 如果购物车不为空，则显示 -->
  <view wx:if="{{count}}">
    <!-- 购物车的左边：购物车logo以及价格信息 -->
    <view class='cart_left'>
      <!-- 购物车locart_leftgo以及其右上角的数量提示 -->   
      <view class='cart_left_logo'>
        <text class='fa fa-cart-plus fa-4x active' ></text>
        <view class='cart_left_logo_count'>
          <text>{{count}}</text>
        </view>               
      </view>
      <!-- 在当前购物车的商品的总价 -->
      <view class='cart_left_text_active'>
        <text>￥{{sum}}</text>
      </view> 
    </view>
    <!-- 购物车的右边：点击跳转到订单页面 -->
    <view class='cart_right_active' bindtap="showCartModal">选好了</view>  
  </view>

  <!-- 如果购物车为空，则显示 -->
  <view wx:else>
    <!-- 购物车的左边：购物车logo以及价格信息 -->
    <view class='cart_left'>
      <!-- 空的购物车logo -->
      <view class='cart_left_logo'>
        <text class='fa fa-cart-plus fa-4x' ></text>
      </view>
      <!-- 空空如也的提示 -->
      <view class='cart_left_text'>
        <text>购物车空空如也~</text>
      </view>  
    </view>
    <!-- 购物车的右边：点击跳转到订单页面 -->
    <view class='cart_right'>选好了</view>
  </view>
</view>

<!-- 具体购物车 -->
<view class='cartModal' wx:if="{{count}}">
  <!-- 蒙蔽层 -->
  <view animation="{{animationMask}}" 
        bindtap="CartHideModal" 
        class="cartModal_mask"></view>
  <!-- 内容层 -->
  <view animation="{{animationContent}}" class="cartModal_content">
    <!-- 购物车的头部 --> 
    <view class="content_header">
      <text class='fa fa-cart-arrow-down fa-lg'></text>
      <text class="content_header_title">已选商品</text>
      <view class='content_header_deleteAll'>
        <text class='fa fa-trash-o'></text>
        <text bindtap='deleteAll'>清空购物车</text>
      </view>
    </view>
    
    <!-- 可滚动的购物车内容 -->
    <scroll-view class="content_body" 
                 scroll-y="true" 
                 style="height: {{scrollHeight}}rpx;">
      <!-- 在购物车的商品 -->
      <view class='body_item' 
            wx:for="{{cartObjects}}" 
            wx:key="">
        <view class='information'>
          <view class='body_item_title'>{{item.title}}</view>
          <view class='body_item_size'>{{item.size}}</view>
        </view>
        <view class="body_item_fee">{{item.price * item.quantity}}</view>
        <view class='button_group'>
          <!-- 减少按钮 -->
          <text class="fa fa-minus-square fa-lg"
                bindtap="reducePreOrder"
                data-index="{{index}}"
                style='float:left;'> </text>    
          <!-- 当预购数量大于0才显示的预购数量 -->
          <text>  {{item.preOrder}} </text>
          <!-- 增加按钮 -->
          <text class="fa fa-plus-square fa-lg" 
                style='color: red;'
                bindtap='addPreOrder'
                data-index="{{index}}"
                style='float:right;'> </text>
        </view>
      </view> 
    </scroll-view>

  </view>
</view>